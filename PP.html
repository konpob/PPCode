<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÅ‡∏ú‡∏ô‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à PPCode (Corrected Financials)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600;700&family=Sarabun:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root { --brand-purple: #8B5CF6; --brand-blue: #3B82F6; }
        body { font-family: 'Prompt', sans-serif; background-color: #f1f5f9; color: #1e293b; }
        .gradient-bg { background: linear-gradient(135deg, var(--brand-purple), var(--brand-blue)); }
        .card { background: white; border-radius: 12px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05); border: 1px solid #e2e8f0; }
        .input-box { width: 100%; padding: 6px 10px; border: 1px solid #cbd5e1; border-radius: 6px; text-align: right; font-family: 'Sarabun'; font-weight: 600; color: #334155; font-size: 14px; outline: none; transition: all 0.2s; }
        .input-box:focus { border-color: #8B5CF6; box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.1); }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f5f9; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        .role-tag { font-size: 10px; padding: 2px 8px; border-radius: 99px; background: #f1f5f9; border: 1px solid #e2e8f0; color: #475569; font-weight: 600; white-space: nowrap; }
    </style>
</head>
<body class="pb-24 text-sm">

    <header class="gradient-bg text-white py-8 relative overflow-hidden shadow-lg">
        <div class="max-w-7xl mx-auto px-6 relative z-10 flex flex-col md:flex-row justify-between items-center gap-4">
            <div>
                <h1 class="text-2xl md:text-3xl font-bold mb-1">PPCode Business Plan</h1>
                <p class="text-purple-100 opacity-90 text-sm md:text-base">‡∏â‡∏ö‡∏±‡∏ö‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (Full Operation Cost)</p>
            </div>
            <div class="flex gap-2">
                <span class="bg-white/20 backdrop-blur px-3 py-1 rounded-full text-xs border border-white/30">Dev: 3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</span>
                <span class="bg-white/20 backdrop-blur px-3 py-1 rounded-full text-xs border border-white/30">Sales: 3 ‡∏õ‡∏µ</span>
            </div>
        </div>
    </header>

    <div class="max-w-7xl mx-auto px-6 -mt-8 relative z-20 mb-8">
        <div class="card p-6 flex flex-wrap justify-between items-center gap-6 shadow-xl bg-white/95 backdrop-blur">
            <div class="flex flex-wrap gap-8">
                <div>
                    <div class="text-[10px] text-slate-500 uppercase font-bold tracking-wider">‡πÄ‡∏á‡∏¥‡∏ô‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (Sunk Cost)</div>
                    <div class="text-2xl font-bold text-red-500" id="header-capex">0 ‡∏ø</div>
                    <div class="text-[10px] text-slate-400">‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á 3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÅ‡∏£‡∏Å + ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</div>
                </div>
                <div class="w-px h-10 bg-slate-200 hidden md:block"></div>
                <div>
                    <div class="text-[10px] text-slate-500 uppercase font-bold tracking-wider">‡∏à‡∏∏‡∏î‡∏Ñ‡∏∏‡πâ‡∏°‡∏ó‡∏∏‡∏ô (Break-even)</div>
                    <div class="text-xl font-bold text-blue-600" id="header-breakeven">-</div>
                    <div class="text-[10px] text-slate-400">‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏ö‡∏ß‡∏Å</div>
                </div>
                <div class="w-px h-10 bg-slate-200 hidden md:block"></div>
                <div>
                    <div class="text-[10px] text-slate-500 uppercase font-bold tracking-wider">‡∏Å‡∏≥‡πÑ‡∏£‡∏™‡∏∞‡∏™‡∏° (‡∏™‡∏¥‡πâ‡∏ô‡∏õ‡∏µ‡∏ó‡∏µ‡πà 3)</div>
                    <div class="text-2xl font-bold text-emerald-500" id="header-profit">0 ‡∏ø</div>
                </div>
            </div>
            <button onclick="window.print()" class="px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-600 rounded-lg transition text-xs font-bold flex items-center gap-2">
                üñ®Ô∏è ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
            </button>
        </div>
    </div>

    <main class="max-w-7xl mx-auto px-6 space-y-6">

        <div class="grid md:grid-cols-12 gap-6">
            <div class="md:col-span-4 space-y-6">
                <div class="card p-5">
                    <h2 class="font-bold text-base mb-4 text-purple-700 flex items-center gap-2">
                        üë• 1. ‡∏ê‡∏≤‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡∏°‡∏á‡∏≤‡∏ô
                    </h2>
                    <div id="team-container" class="space-y-3 mb-4 max-h-[250px] overflow-y-auto custom-scrollbar pr-2"></div>
                    <div class="bg-slate-50 p-3 rounded-lg border border-slate-100 text-xs text-slate-500">
                        <div class="flex justify-between mb-1">
                            <span>‡∏£‡∏ß‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô:</span>
                            <span class="font-bold text-slate-700" id="total-monthly">0</span>
                        </div>
                        <div class="flex justify-between text-purple-600 font-bold">
                            <span>‡∏£‡∏ß‡∏° 3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (‡∏ä‡πà‡∏ß‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤):</span>
                            <span id="total-dev-cost">0</span>
                        </div>
                    </div>
                </div>

                <div class="card p-5">
                    <h2 class="font-bold text-base mb-4 text-orange-600 flex items-center gap-2">
                        üñ•Ô∏è 2. ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå & ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà (‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß)
                    </h2>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <div>
                                <div class="text-xs font-bold text-slate-700">‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå (6 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á)</div>
                                <div class="text-[10px] text-slate-400">High Spec ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Dev/Design</div>
                            </div>
                            <div class="w-24">
                                <input type="number" id="inp-computer" value="240000" class="input-box" onchange="recalc()">
                            </div>
                        </div>
                        <div class="flex justify-between items-center">
                            <div>
                                <div class="text-xs font-bold text-slate-700">‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á/‡∏°‡∏±‡∏î‡∏à‡∏≥‡∏≠‡∏≠‡∏ü‡∏ü‡∏¥‡∏®</div>
                                <div class="text-[10px] text-slate-400">‡πÇ‡∏ï‡πä‡∏∞ ‡πÄ‡∏Å‡πâ‡∏≤‡∏≠‡∏µ‡πâ ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡πÄ‡∏ä‡πà‡∏≤</div>
                            </div>
                            <div class="w-24">
                                <input type="number" id="inp-office-setup" value="100000" class="input-box" onchange="recalc()">
                            </div>
                        </div>
                        <div class="flex justify-between items-center pt-2 border-t border-slate-100">
                            <span class="text-xs font-bold text-slate-500">‡∏£‡∏ß‡∏°‡∏Ñ‡πà‡∏≤‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå:</span>
                            <span class="text-sm font-bold text-orange-600" id="total-hardware">0</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="md:col-span-8">
                <div class="card p-5 h-full flex flex-col">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="font-bold text-base text-blue-600 flex items-center gap-2">
                            üõ†Ô∏è 3. ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô (Scope)
                        </h2>
                        <div class="text-right">
                            <div class="text-[10px] text-slate-400">Timeline Used</div>
                            <div class="text-xs font-bold" id="capacity-text">0 / 66 Days</div>
                        </div>
                    </div>
                    <div class="w-full bg-slate-100 rounded-full h-1.5 mb-4 overflow-hidden">
                        <div id="progress-bar" class="bg-gradient-to-r from-purple-500 to-blue-500 h-full rounded-full transition-all duration-500" style="width: 0%"></div>
                    </div>
                    <div id="feature-list" class="space-y-3 overflow-y-auto custom-scrollbar flex-1 pr-2 max-h-[500px]"></div>
                </div>
            </div>
        </div>

        <div class="card p-6">
            <h2 class="font-bold text-lg mb-6 text-slate-800 border-b pb-2 flex justify-between items-end">
                <span>üí∏ 4. ‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏ï‡∏±‡∏ß (Monthly Burn Rate)</span>
                <span class="text-xs font-normal text-slate-400">*‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏ö‡∏ö‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (Full Team)</span>
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-8">
                <div class="bg-slate-50 p-3 rounded-lg border border-slate-200">
                    <label class="text-[10px] font-bold text-slate-500 uppercase block mb-1">‚òÅÔ∏è Server & Cloud</label>
                    <input type="number" id="inp-server" value="20000" class="input-box mb-1" onchange="recalc()">
                    <div class="text-[10px] text-slate-400">AWS, Firebase</div>
                </div>
                
                <div class="bg-slate-50 p-3 rounded-lg border border-slate-200">
                    <label class="text-[10px] font-bold text-slate-500 uppercase block mb-1">üì¢ ‡∏¢‡∏¥‡∏á‡πÅ‡∏≠‡∏î/‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î</label>
                    <input type="number" id="inp-marketing" value="30000" class="input-box mb-1 text-blue-600" onchange="recalc()">
                    <div class="text-[10px] text-slate-400">FB/TikTok Ads</div>
                </div>

                <div class="bg-slate-50 p-3 rounded-lg border border-slate-200">
                    <label class="text-[10px] font-bold text-slate-500 uppercase block mb-1">üè¢ ‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤‡∏≠‡∏≠‡∏ü‡∏ü‡∏¥‡∏®</label>
                    <input type="number" id="inp-rent" value="25000" class="input-box mb-1" onchange="recalc()">
                    <div class="text-[10px] text-slate-400">‡∏£‡∏ß‡∏°‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏•‡∏≤‡∏á</div>
                </div>

                <div class="bg-slate-50 p-3 rounded-lg border border-slate-200">
                    <label class="text-[10px] font-bold text-slate-500 uppercase block mb-1">‚ö° ‡∏ô‡πâ‡∏≥/‡πÑ‡∏ü/‡πÄ‡∏ô‡πá‡∏ï</label>
                    <input type="number" id="inp-utilities" value="5000" class="input-box mb-1" onchange="recalc()">
                    <div class="text-[10px] text-slate-400">Internet Fiber</div>
                </div>

                <div class="bg-red-50 p-3 rounded-lg border border-red-100 flex flex-col justify-center">
                    <div class="text-[10px] font-bold text-red-400 uppercase mb-1">‡∏£‡∏ß‡∏°‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</div>
                    <div class="text-xl font-bold text-red-600" id="txt-total-monthly-opex">0 ‡∏ø</div>
                    <div class="text-[9px] text-red-400">(‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô + ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡∏á‡∏ó‡∏µ‡πà)</div>
                </div>
            </div>

            <div class="flex flex-wrap gap-6 items-center justify-center bg-white border border-slate-100 rounded-lg p-4 mb-6 shadow-sm">
                <div class="flex items-center gap-2">
                    <span class="text-xs font-bold text-slate-500">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢ (Sub):</span>
                    <input type="number" id="inp-price" value="99" class="w-16 text-center font-bold text-emerald-600 border-b outline-none" onchange="recalc()">
                    <span class="text-xs text-slate-400">‡∏ö‡∏≤‡∏ó/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</span>
                </div>
                <div class="w-px h-4 bg-slate-200"></div>
                <div class="flex items-center gap-2">
                    <span class="text-xs font-bold text-slate-500">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°:</span>
                    <input type="number" id="inp-start-user" value="500" class="w-16 text-center font-bold text-slate-700 border-b outline-none" onchange="recalc()">
                    <span class="text-xs text-slate-400">‡∏Ñ‡∏ô</span>
                </div>
                <div class="w-px h-4 bg-slate-200"></div>
                <div class="flex items-center gap-2">
                    <span class="text-xs font-bold text-slate-500">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà (‡πÇ‡∏ï/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô):</span>
                    <input type="number" id="inp-growth" value="500" class="w-16 text-center font-bold text-blue-600 border-b outline-none" onchange="recalc()">
                    <span class="text-xs text-slate-400">‡∏Ñ‡∏ô</span>
                </div>
            </div>

            <div class="h-[350px] w-full mb-8">
                <canvas id="mainChart"></canvas>
            </div>

            <div class="overflow-x-auto">
                <table class="w-full text-xs text-right">
                    <thead class="bg-slate-50 text-slate-500 border-b uppercase tracking-wider font-semibold">
                        <tr>
                            <th class="p-3 text-left">‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤</th>
                            <th class="p-3">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (‡∏Ñ‡∏ô)</th>
                            <th class="p-3 text-emerald-600">‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ (Revenue)</th>
                            <th class="p-3 text-red-500">‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏£‡∏ß‡∏° (Total Cost)</th>
                            <th class="p-3">‡∏Å‡∏≥‡πÑ‡∏£/‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô (Net Profit)</th>
                            <th class="p-3">‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î‡∏™‡∏∞‡∏™‡∏° (Cash Flow)</th>
                        </tr>
                    </thead>
                    <tbody id="finance-table-body" class="divide-y divide-slate-100 font-sarabun text-slate-700"></tbody>
                </table>
            </div>
        </div>

    </main>

    <footer class="text-center py-8 text-slate-400 text-xs">
        ¬© 2025 PPCode Business Plan Simulator (Corrected Logic)
    </footer>

    <script>
        // --- 1. ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡πâ‡∏á‡∏ï‡πâ‡∏ô ---
        
        const teamData = [
            { id: 0, role: 'CEO (‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£)', salary: 50000, short: 'CEO' },
            { id: 1, role: 'CFO (‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô)', salary: 45000, short: 'CFO' },
            { id: 2, role: 'CMO (‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î)', salary: 40000, short: 'CMO' },
            { id: 3, role: 'COO (‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£)', salary: 45000, short: 'COO' },
            { id: 4, role: 'Dev 1 (Front)', salary: 55000, short: 'Dev1' },
            { id: 5, role: 'Dev 2 (Back)', salary: 60000, short: 'Dev2' }
        ];

        const featuresData = [
            // ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1
            { name: "1. ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö UX/UI & Theme", days: 7, roles: [2, 4], desc: "‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö Mockup 30+ ‡∏´‡∏ô‡πâ‡∏≤ ‡πÅ‡∏•‡∏∞ Design System" }, 
            { name: "2. ‡∏ß‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Database)", days: 3, roles: [3, 5], desc: "‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö ER Diagram ‡πÅ‡∏•‡∏∞ Cloud Server Architecture" },
            { name: "3. ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å & ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢", days: 5, roles: [4, 5], desc: "Login, OTP, Encryption, PDPA" },
            { name: "4. ‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö-‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢", days: 5, roles: [4, 5], desc: "CRUD Transaction, ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà, ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤" },
            
            // ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2
            { name: "5. ‡∏™‡∏°‡∏≠‡∏á‡∏Å‡∏• 3 ‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á (Core Logic)", days: 10, roles: [0, 1, 5], desc: "‡∏™‡∏π‡∏ï‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö ‡∏≠‡∏≠‡∏° vs ‡∏•‡∏á‡∏ó‡∏∏‡∏ô vs ‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à" },
            { name: "6. ‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á (Risk)", days: 5, roles: [1, 5], desc: "Risk Scoring ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏û‡∏≠‡∏£‡πå‡∏ï" },
            { name: "7. ‡∏Å‡∏£‡∏≤‡∏ü‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï 20 ‡∏õ‡∏µ", days: 7, roles: [1, 5], desc: "Interactive Projection Graph" },
            { name: "8. ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (Goal)", days: 3, roles: [0, 4], desc: "Goal Tracking, Progress Bar" },

            // ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3
            { name: "9. ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•", days: 5, roles: [2, 4], desc: "Overview Dashboard, Charts" },
            { name: "10. ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏±‡∏î‡∏ö‡∏±‡∏ï‡∏£ (Subscription)", days: 5, roles: [3, 5], desc: "Payment Gateway, Auto-billing" },
            { name: "11. ‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô (Admin)", days: 4, roles: [3, 5], desc: "User Management, Report" },
            { name: "12. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö (Beta Test)", days: 7, roles: [0, 1, 2, 3, 4, 5], desc: "End-to-End Testing, Bug Fixes" }
        ];

        let chart = null;

        // --- 2. LOGIC ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì ---

        function init() {
            renderTeam();
            recalc();
        }

        function renderTeam() {
            const container = document.getElementById('team-container');
            container.innerHTML = teamData.map((m, i) => `
                <div class="flex justify-between items-center text-xs border-b border-slate-100 pb-2 last:border-0">
                    <div class="flex items-center gap-2">
                        <div class="w-8 h-8 rounded-lg bg-slate-100 text-[10px] flex items-center justify-center font-bold text-slate-500">${m.short}</div>
                        <div><div class="font-bold text-slate-700">${m.role}</div></div>
                    </div>
                    <div class="flex items-center gap-2">
                        <input type="number" value="${m.salary}" class="input-box w-20 text-xs" onchange="updateSalary(${i}, this.value)">
                        <span class="text-xs text-slate-400">‡∏ö.</span>
                    </div>
                </div>
            `).join('');
        }

        function recalc() {
            // 1. ‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á‡∏ó‡∏µ‡∏°‡∏á‡∏≤‡∏ô
            const workDays = 22;
            let totalMonthlySalary = 0;
            const dailyRates = teamData.map(m => {
                totalMonthlySalary += m.salary;
                return { ...m, dailyRate: m.salary / workDays };
            });

            document.getElementById('total-monthly').innerText = totalMonthlySalary.toLocaleString() + " ‡∏ø";
            const totalDevSalary = totalMonthlySalary * 3; // ‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á‡∏ä‡πà‡∏ß‡∏á Dev 3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
            document.getElementById('total-dev-cost').innerText = totalDevSalary.toLocaleString() + " ‡∏ø";

            // 2. ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (Initial Investment)
            const costComputer = parseFloat(document.getElementById('inp-computer').value) || 0;
            const costOffice = parseFloat(document.getElementById('inp-office-setup').value) || 0;
            const totalHardware = costComputer + costOffice;
            document.getElementById('total-hardware').innerText = totalHardware.toLocaleString() + " ‡∏ø";

            const initialInvestment = totalDevSalary + totalHardware;
            document.getElementById('header-capex').innerText = initialInvestment.toLocaleString() + " ‡∏ø";

            // 3. Feature Costs
            const featureContainer = document.getElementById('feature-list');
            let totalDevDays = 0;
            let html = '';

            featuresData.forEach((f, i) => {
                let featureCost = 0;
                let breakdownHtml = '';
                f.roles.forEach(roleId => {
                    const person = dailyRates.find(r => r.id === roleId);
                    if(person) {
                        const personCost = person.dailyRate * f.days;
                        featureCost += personCost;
                        breakdownHtml += `<div class="flex justify-between text-[10px] text-slate-500 border-b border-slate-50 py-1"><span>${person.role}</span><span>${Math.round(personCost).toLocaleString()}</span></div>`;
                    }
                });
                totalDevDays += f.days;
                html += `
                    <div class="bg-white rounded-lg border border-slate-200 shadow-sm p-3 mb-3 hover:shadow-md transition">
                        <div class="flex justify-between items-center mb-2">
                            <div class="flex items-center gap-2"><span class="bg-slate-100 text-[10px] px-2 rounded text-slate-500 font-bold">${i+1}</span><span class="font-bold text-slate-700 text-xs">${f.name}</span></div>
                            <div class="text-[10px] text-slate-400">${f.days} ‡∏ß‡∏±‡∏ô</div>
                        </div>
                        <div class="flex justify-between items-end">
                            <div class="w-2/3 pr-2"><div class="text-[9px] text-slate-400 uppercase font-bold mb-1">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô</div>${breakdownHtml}</div>
                            <div class="text-right"><div class="text-[9px] text-slate-400">‡∏£‡∏ß‡∏°</div><div class="font-bold text-sm text-purple-600">${Math.round(featureCost).toLocaleString()} ‡∏ø</div></div>
                        </div>
                    </div>`;
            });
            featureContainer.innerHTML = html;
            
            const maxDays = 66; 
            const pct = (totalDevDays / maxDays) * 100;
            document.getElementById('capacity-text').innerHTML = `${totalDevDays} / ${maxDays} ‡∏ß‡∏±‡∏ô`;
            document.getElementById('progress-bar').style.width = `${Math.min(pct, 100)}%`;

            // 4. ‡∏á‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô (Financial Projection)
            const price = parseFloat(document.getElementById('inp-price').value);
            const startUser = parseFloat(document.getElementById('inp-start-user').value);
            const growth = parseFloat(document.getElementById('inp-growth').value);
            
            const cServer = parseFloat(document.getElementById('inp-server').value) || 0;
            const cAds = parseFloat(document.getElementById('inp-marketing').value) || 0;
            const cRent = parseFloat(document.getElementById('inp-rent').value) || 0;
            const cUtil = parseFloat(document.getElementById('inp-utilities').value) || 0;
            
            const fixedMonthlyOpEx = cServer + cAds + cRent + cUtil;
            // *** ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏à‡∏∏‡∏î‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡∏Ñ‡∏¥‡∏î‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á‡∏ó‡∏µ‡∏°‡∏á‡∏≤‡∏ô‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏∏‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ***
            const totalMonthlyExpense = fixedMonthlyOpEx + totalMonthlySalary; 

            document.getElementById('txt-total-monthly-opex').innerText = totalMonthlyExpense.toLocaleString() + " ‡∏ø";

            let users = startUser;
            let cash = -initialInvestment; // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ï‡∏¥‡∏î‡∏•‡∏ö
            let breakEvenMonth = null;
            
            const labels = [];
            const dataCash = [];
            const tableBody = document.getElementById('finance-table-body');
            tableBody.innerHTML = '';

            for(let m=1; m<=36; m++) {
                const revenue = users * price;
                
                const net = revenue - totalMonthlyExpense; // ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ - (‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡∏á‡∏ó‡∏µ‡πà + ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡∏°‡∏á‡∏≤‡∏ô)
                cash += net;
                
                if(cash >= 0 && breakEvenMonth === null) breakEvenMonth = m;
                
                labels.push(`‡∏î.${m}`);
                dataCash.push(cash);

                if (m === 1 || m % 3 === 0) {
                    const label = m === 1 ? "‡πÄ‡∏õ‡∏¥‡∏î‡∏ï‡∏±‡∏ß (‡πÄ‡∏î‡∏∑‡∏≠‡∏ô 1)" : `‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà ${m}`;
                    tableBody.innerHTML += `
                        <tr class="hover:bg-slate-50 transition border-b border-slate-50 last:border-0">
                            <td class="p-3 text-left font-medium text-slate-700">${label}</td>
                            <td class="p-3 text-slate-500">${Math.round(users).toLocaleString()}</td>
                            <td class="p-3 text-emerald-600 font-medium">+${Math.round(revenue).toLocaleString()}</td>
                            <td class="p-3 text-red-500 font-medium">-${Math.round(totalMonthlyExpense).toLocaleString()}</td>
                            <td class="p-3 ${net > 0 ? 'text-emerald-600' : 'text-red-500'} font-bold">${Math.round(net).toLocaleString()}</td>
                            <td class="p-3 ${cash > 0 ? 'text-emerald-600' : 'text-red-500'} font-bold bg-slate-50/50">${Math.round(cash).toLocaleString()}</td>
                        </tr>
                    `;
                }
                users += growth;
            }

            document.getElementById('header-profit').innerText = Math.round(cash).toLocaleString() + " ‡∏ø";
            document.getElementById('header-breakeven').innerText = breakEvenMonth ? `‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà ${breakEvenMonth}` : "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏∑‡∏ô‡∏ó‡∏∏‡∏ô";

            renderChart(labels, dataCash);
        }

        function updateSalary(idx, val) { teamData[idx].salary = parseFloat(val) || 0; recalc(); }
        function updateFeatureDays(idx, val) { featuresData[idx].days = parseFloat(val) || 0; recalc(); }

        function renderChart(labels, data) {
            const ctx = document.getElementById('mainChart').getContext('2d');
            if (chart) chart.destroy();
            const gradient = ctx.createLinearGradient(0, 0, 0, 300);
            gradient.addColorStop(0, 'rgba(139, 92, 246, 0.2)');
            gradient.addColorStop(1, 'rgba(59, 130, 246, 0.01)');
            chart = new Chart(ctx, {
                type: 'line',
                data: { labels: labels, datasets: [{ label: '‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î‡∏™‡∏∞‡∏™‡∏° (‡∏ö‡∏≤‡∏ó)', data: data, borderColor: '#8B5CF6', backgroundColor: gradient, borderWidth: 2, pointRadius: 0, pointHoverRadius: 6, fill: true, tension: 0.4 }] },
                options: { responsive: true, maintainAspectRatio: false, interaction: { mode: 'index', intersect: false }, plugins: { legend: { display: false } }, scales: { x: { grid: { display: false }, ticks: { font: { size: 10 } } }, y: { grid: { color: '#f1f5f9' }, ticks: { callback: (val) => val/1000 + 'k' } } } }
            });
        }

        init();
    </script>
</body>
</html>